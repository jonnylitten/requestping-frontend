<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New FOIA Request - RequestPing</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">RequestPing</div>
            <div class="nav-links">
                <a href="dashboard.html">Dashboard</a>
                <a href="#" id="logout">Logout</a>
            </div>
        </nav>
    </header>

    <main>
        <div style="max-width: 800px; margin: 2rem auto;">
            <h1>New Virginia FOIA Request</h1>
            <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                Tell us what records you're looking for. We'll craft a proper Virginia FOIA request and file it on your behalf with the state agency.
            </p>

            <form id="request-form">
                <div class="form-group">
                    <label for="entity-search">Virginia Entity *</label>
                    <div class="autocomplete-wrapper">
                        <input type="text"
                               id="entity-search"
                               placeholder="Search for state agency, county, city, town, or university..."
                               autocomplete="off"
                               required>
                        <div id="autocomplete-results" class="autocomplete-results"></div>
                    </div>

                    <input type="hidden" id="selected-entity-id" name="entity_id">
                    <input type="hidden" id="selected-entity-category" name="entity_category">
                    <input type="hidden" id="selected-entity-name" name="entity_name">
                    <input type="hidden" id="selected-entity-abbr" name="entity_abbr">

                    <div id="selected-entity-display" class="selected-entity"></div>
                    <small>Search across all Virginia state agencies, counties, cities, towns, and universities.</small>
                </div>

                <div class="form-group">
                    <label for="subject">Request Subject *</label>
                    <input type="text" id="subject" name="subject" required placeholder="e.g., Email records about Project X">
                    <small>Brief description of what you're requesting.</small>
                </div>

                <div class="form-group">
                    <label for="description">Detailed Description *</label>
                    <textarea id="description" name="description" required placeholder="Describe the records you're seeking in as much detail as possible. Include dates, names, keywords, or any other identifying information that will help the agency locate the records."></textarea>
                    <small><strong>Be specific to avoid delays!</strong> Good examples: "All emails sent by John Smith in the Planning Department between Jan 1-31, 2024 containing the word 'zoning'" or "The inspection report for 123 Main Street conducted on March 15, 2024." Bad examples: "All emails about zoning" (too broad) or "Everything related to planning" (too vague). If your request is very broad, agencies may estimate high costs - we'll contact you before proceeding.</small>
                </div>

                <div class="form-group">
                    <label for="date-range-start">Date Range (optional)</label>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <input type="date" id="date-range-start" name="date-range-start" placeholder="Start date">
                        <span>to</span>
                        <input type="date" id="date-range-end" name="date-range-end" placeholder="End date">
                    </div>
                    <small>If your request covers a specific time period, specify it here.</small>
                </div>

                <div class="form-group">
                    <label for="delivery-format">Preferred Delivery Format</label>
                    <select id="delivery-format" name="delivery-format">
                        <option value="electronic">Electronic</option>
                        <option value="paper">Paper copies</option>
                        <option value="either">Either</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Fee Information</label>
                    <p style="background: var(--bg-secondary); padding: 1rem; border-radius: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>Virginia FOIA Fees:</strong> Agencies may charge for actual costs of accessing, duplicating, supplying, or searching for records. Costs are based on staff hourly rates. We'll notify you if the agency estimates fees before proceeding with your request.
                    </p>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="acknowledge-fees" name="acknowledge-fees" required>
                        I understand that agencies may charge actual costs for fulfilling my request, and RequestPing will contact me if fees are estimated before proceeding
                    </label>
                </div>

                <div id="error-message" class="error-message" style="display: none;"></div>
                <div id="success-message" class="success-message" style="display: none;"></div>

                <div style="display: flex; gap: 1rem;">
                    <button type="button" onclick="window.location.href='dashboard.html'" class="primary-button" style="background: var(--secondary-color); flex: 1;">Cancel</button>
                    <button type="submit" class="primary-button" style="flex: 2;">Submit Request</button>
                </div>
            </form>
        </div>
    </main>

    <script src="js/config.js"></script>
    <script src="js/request.js"></script>
</body>
</html>
